{"ast":null,"code":"import*as d3 from\"d3\";import cloud from\"d3-cloud\";var drawnClouds=false;function drawClouds(words){var factor=1.1/Math.sqrt(Math.max(words[0][1],Math.abs(words[0][3])));// Removes previously drawn clouds\nif(drawnClouds){d3.select(\"#positive-cloud\").remove();d3.select(\"#negative-cloud\").remove();}else{drawnClouds=true;}// Removes placeholder images to get rid of jitter\n// d3.select(\"#pos-placeholder\").remove();\n// d3.select(\"#neg-placeholder\").remove();\nvar positiveLayout=cloud().size([400,300]).words(words.map(function(d){return{text:d[0],size:Math.sqrt(Math.abs(d[1]))*factor*30};})).padding(2).rotate(function(){return 0;}).font(\"Helvetica\").fontSize(function(d){return d.size;}).on(\"end\",drawPositive);positiveLayout.start();function drawPositive(words){d3.select(\"#positive-cloud-div\").append(\"svg\").attr(\"id\",\"positive-cloud\").attr(\"width\",positiveLayout.size()[0]).attr(\"height\",positiveLayout.size()[1]).append(\"g\").attr(\"transform\",\"translate(\"+positiveLayout.size()[0]/2+\",\"+positiveLayout.size()[1]/2+\")\").selectAll(\"text\").data(words).enter().append(\"text\").style(\"font-size\",function(d){return d.size+\"px\";}).style(\"font-family\",\"Cambria\").style(\"font-weight\",500).attr(\"text-anchor\",\"middle\").attr(\"fill\",\"green\").attr(\"transform\",function(d){return\"translate(\"+[d.x,d.y]+\")rotate(\"+d.rotate+\")\";}).text(function(d){return d.text;});}var negativeLayout=cloud().size([180,300]).words(words.map(function(d){return{text:d[2],size:Math.sqrt(Math.abs(d[3]))*factor*20};})).padding(2).rotate(function(){return 0;}).font(\"Impact\").fontSize(function(d){return d.size;}).on(\"end\",drawNegative);negativeLayout.start();function drawNegative(words){d3.select(\"#negative-cloud-div\").append(\"svg\").attr(\"id\",\"negative-cloud\").attr(\"width\",negativeLayout.size()[0]).attr(\"height\",negativeLayout.size()[1]).append(\"g\").attr(\"transform\",\"translate(\"+negativeLayout.size()[0]/2+\",\"+negativeLayout.size()[1]/2+\")\").selectAll(\"text\").data(words).enter().append(\"text\").style(\"font-size\",function(d){return d.size+\"px\";}).style(\"font-family\",\"Helvetica\").style(\"font-weight\",600).attr(\"fill\",\"red\").attr(\"text-anchor\",\"middle\").attr(\"transform\",function(d){return\"translate(\"+[d.x,d.y]+\")rotate(\"+d.rotate+\")\";}).text(function(d){return d.text;});}return{positiveWords:[words[0][0],words[1][0],words[2][0]],negativeWords:words[0][2]};}export{drawClouds};","map":{"version":3,"names":["d3","cloud","drawnClouds","drawClouds","words","factor","Math","sqrt","max","abs","select","remove","positiveLayout","size","map","d","text","padding","rotate","font","fontSize","on","drawPositive","start","append","attr","selectAll","data","enter","style","x","y","negativeLayout","drawNegative","positiveWords","negativeWords"],"sources":["/Users/Shivam/Library/CloudStorage/GoogleDrive-sraval@g.harvard.edu/My Drive/Github/Cluster-Research-new/frontend/src/d3-rendering/cloudFunctions.js"],"sourcesContent":["import * as d3 from \"d3\";\nimport cloud from \"d3-cloud\";\n\nvar drawnClouds = false;\n\nfunction drawClouds(words) {\n  let factor = 1.1 / Math.sqrt(Math.max(words[0][1], Math.abs(words[0][3])));\n  // Removes previously drawn clouds\n  if (drawnClouds) {\n    d3.select(\"#positive-cloud\").remove();\n    d3.select(\"#negative-cloud\").remove();\n  } else {\n    drawnClouds = true;\n  }\n\n  // Removes placeholder images to get rid of jitter\n  // d3.select(\"#pos-placeholder\").remove();\n  // d3.select(\"#neg-placeholder\").remove();\n\n  var positiveLayout = cloud()\n    .size([400, 300])\n    .words(\n      words.map(function (d) {\n        return {\n          text: d[0],\n          size: Math.sqrt(Math.abs(d[1])) * factor * 30,\n        };\n      })\n    )\n    .padding(2)\n    .rotate(function () {\n      return 0;\n    })\n    .font(\"Helvetica\")\n    .fontSize(function (d) {\n      return d.size;\n    })\n    .on(\"end\", drawPositive);\n\n  positiveLayout.start();\n\n  function drawPositive(words) {\n    d3.select(\"#positive-cloud-div\")\n      .append(\"svg\")\n      .attr(\"id\", \"positive-cloud\")\n      .attr(\"width\", positiveLayout.size()[0])\n      .attr(\"height\", positiveLayout.size()[1])\n      .append(\"g\")\n      .attr(\n        \"transform\",\n        \"translate(\" +\n          positiveLayout.size()[0] / 2 +\n          \",\" +\n          positiveLayout.size()[1] / 2 +\n          \")\"\n      )\n      .selectAll(\"text\")\n      .data(words)\n      .enter()\n      .append(\"text\")\n      .style(\"font-size\", function (d) {\n        return d.size + \"px\";\n      })\n      .style(\"font-family\", \"Cambria\")\n      .style(\"font-weight\", 500)\n      .attr(\"text-anchor\", \"middle\")\n      .attr(\"fill\", \"green\")\n      .attr(\"transform\", function (d) {\n        return \"translate(\" + [d.x, d.y] + \")rotate(\" + d.rotate + \")\";\n      })\n      .text(function (d) {\n        return d.text;\n      });\n  }\n\n  var negativeLayout = cloud()\n    .size([180, 300])\n    .words(\n      words.map(function (d) {\n        return {\n          text: d[2],\n          size: Math.sqrt(Math.abs(d[3])) * factor * 20,\n        };\n      })\n    )\n    .padding(2)\n    .rotate(function () {\n      return 0;\n    })\n    .font(\"Impact\")\n    .fontSize(function (d) {\n      return d.size;\n    })\n    .on(\"end\", drawNegative);\n\n  negativeLayout.start();\n\n  function drawNegative(words) {\n    d3.select(\"#negative-cloud-div\")\n      .append(\"svg\")\n      .attr(\"id\", \"negative-cloud\")\n      .attr(\"width\", negativeLayout.size()[0])\n      .attr(\"height\", negativeLayout.size()[1])\n      .append(\"g\")\n      .attr(\n        \"transform\",\n        \"translate(\" +\n          negativeLayout.size()[0] / 2 +\n          \",\" +\n          negativeLayout.size()[1] / 2 +\n          \")\"\n      )\n      .selectAll(\"text\")\n      .data(words)\n      .enter()\n      .append(\"text\")\n      .style(\"font-size\", function (d) {\n        return d.size + \"px\";\n      })\n      .style(\"font-family\", \"Helvetica\")\n      .style(\"font-weight\", 600)\n      .attr(\"fill\", \"red\")\n      .attr(\"text-anchor\", \"middle\")\n      .attr(\"transform\", function (d) {\n        return \"translate(\" + [d.x, d.y] + \")rotate(\" + d.rotate + \")\";\n      })\n      .text(function (d) {\n        return d.text;\n      });\n  }\n\n  return {\n    positiveWords: [words[0][0], words[1][0], words[2][0]],\n    negativeWords: words[0][2],\n  };\n}\n\nexport { drawClouds };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}